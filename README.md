# data_transformations

[![Push on main](https://github.com/din-global/data-transformations/actions/workflows/push.yaml/badge.svg)](https://github.com/din-global/data-transformations/actions/workflows/push.yaml)
[![pr-coverage](https://github.com/din-global/data-transformations/actions/workflows/pr-coverage.yaml/badge.svg)](https://github.com/din-global/data-transformations/actions/workflows/pr-coverage.yaml)
[![pr-build](https://github.com/din-global/data-transformations/actions/workflows/pr-build.yaml/badge.svg)](https://github.com/din-global/data-transformations/actions/workflows/pr-build.yaml)


The **data_transformations** project manages ETL processes with **Dagster** for orchestration and **DBT** for transformations.

- **Repository**: [data-transformations](https://github.com/din-global/data-transformations/)

## Getting Started

1. **Fork and Clone the Repository**
   First, fork the repository, then clone it to your local environment:

   ```bash
   git clone git@github.com:<your_github_handle>/data-transformations.git
   git remote add upstream git@github.com:din-global/data-transformations.git
   ```

2. **Initialize the Environment**
   Install dependencies and set up pre-commit hooks:

   ```bash
   make install
   ```

   After this, your environment will be ready for development.

## Running the Project Locally

1. **Set Environment Variables**
   Copy the contents of `.env.example` to `.env` file using following Linux command and set the values of these variables:

    ```bash
   cp ./.env.example ./.env
   ```

2. **Start Dagster Server**
   To run the Dagster server locally:

   ```bash
   poetry run dagster dev
   ```

3. **Access the Dagster UI**
   Open [http://localhost:3000](http://localhost:3000) to access the Dagster web interface.

---


## Project Structure

- **data_transformations/**
  Contains the Dagster project with definitions for pipelines, assets, and jobs.

- **analytics/**
  Houses a DBT project, including models for data transformations.

- **tests/**
  Contains unit tests for the Dagster components to ensure functionality.

- **.github/**
  Contains GitHub Actions workflows:
  - **pr-build.yml**: Runs build checks on pull requests.
  - **pr-coverage.yml**: Reports test coverage.
  - **push.yml**: Builds and pushes Docker images.

- **Dockerfile**
  Dockerfile for containerizing the project for consistent deployment.

- **poetry.lock**
  Lock file generated by Poetry for dependency management.

- **poetry.toml**
  Configuration file for Poetry settings.

- **.env.example**
  A sample `.env` file for setting up environment variables.

- **pyproject.toml**
  Central configuration file specifying dependencies, project metadata, and settings.

- **.gitignore**
  Specifies files and directories for Git to ignore.

- **Makefile**
  Provides various commands for project setup, testing, linting, and more.

- **.pre-commit-config.yaml**
  Configures pre-commit hooks to enforce coding standards and ensure code quality.

## Development Guide

### Adding Dependencies

Update `pyproject.toml` to add or manage dependencies. After editing, install new packages with:

```bash
poetry install
```
or
```bash
make install
```

### Running Tests

All tests are located in the `tests` directory. Run tests using:

```bash
make test
```

### Additional Makefile Commands

- **Code Quality Checks**: Run pre-commit hooks, type checks, and dependency audits.

  ```bash
  make check
  ```

- **Build Project**: Generate a distribution package.

  ```bash
  make build
  ```

- **Clean Build Artifacts**: Remove temporary build files.

  ```bash
  make clean
  ```

---

## CI/CD Pipeline

The CI/CD pipeline runs with each pull request or update to `main`. It includes:

- **Build**: Verifies project integrity.
- **Coverage**: Tracks test coverage.
- **Code Quality**: Lints and checks code style.
